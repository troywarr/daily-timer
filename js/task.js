// Generated by CoffeeScript 1.6.3
(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define(["./bar","./timer"],function(t,n){var r;return r=function(){function r(t,n){this.$parentContainer=t;this.taskData=n;this.done=e(this.done,this);this._stop=e(this._stop,this);this.taskTmpl=$("#template_task").html();this.running=!1}r.prototype._getShortcuts=function(){this.$time=this.$container.find(".time");return this.$outerBar=this.$container.find(".bar.outer")};r.prototype._render=function(){this.$container=$(_.template(this.taskTmpl,this.taskData));return this.$parentContainer.append(this.$container)};r.prototype._initBar=function(){this.bar=new t(this.$outerBar);return this.bar.init()};r.prototype._initTimer=function(){this.timer=new n(this.$time,this.bar,this.taskData.time,this.done);return this.timer.init()};r.prototype._start=function(){this.$container.addClass("running");this.timer.start();return this.running=!0};r.prototype._stop=function(){this.$container.removeClass("running");this.timer.stop();return this.running=!1};r.prototype._handleStartStop=function(){var e=this;return this.$container.on("click",function(){return e.running?e._stop():e._start()})};r.prototype.done=function(){this._stop();this.$container.off("click");return this.$container.addClass("done")};r.prototype.init=function(){this._render();this._getShortcuts();this._initBar();this._initTimer();return this._handleStartStop()};return r}()})}).call(this);