// Generated by CoffeeScript 1.6.3
(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define(["jquery","underscore","./bar","./timer"],function(t,n,r,i){var s;return s=function(){function s(n,r){this.$parentContainer=n;this.taskData=r;this.done=e(this.done,this);this._stop=e(this._stop,this);this.taskTmpl=t("#template_task").html();this.running=!1}s.prototype._getShortcuts=function(){this.$time=this.$container.find(".time");return this.$outerBar=this.$container.find(".bar.outer")};s.prototype._render=function(){this.$container=t(n.template(this.taskTmpl,this.taskData));return this.$parentContainer.append(this.$container)};s.prototype._initBar=function(){this.bar=new r(this.$outerBar);return this.bar.init()};s.prototype._initTimer=function(){this.timer=new i(this.$time,this.bar,this.taskData.time,this.done);return this.timer.init()};s.prototype._start=function(){this.$container.addClass("running");this.timer.start();return this.running=!0};s.prototype._stop=function(){this.$container.removeClass("running");this.timer.stop();return this.running=!1};s.prototype._handleStartStop=function(){var e=this;return this.$container.on("click",function(){return e.running?e._stop():e._start()})};s.prototype.done=function(){this._stop();this.$container.off("click");return this.$container.addClass("done")};s.prototype.init=function(){this._render();this._getShortcuts();this._initBar();this._initTimer();return this._handleStartStop()};return s}()})}).call(this);