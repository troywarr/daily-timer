// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}};u={lPad:function(e,t,n){n==null&&(n="0");e+="";return e.length>=t?e:(new Array(t-e.length+1)).join(n)+e},requireTemplate:function(e){var t;t={name:e};t.id="template_"+t.name;t.script=$("#"+t.id);if(t.script.length===0){t.dir="./templates";t.url=""+t.dir+"/"+t.name+".tmpl";$.ajax({url:t.url,method:"GET",async:!1,contentType:"text",success:function(e){return t.string=e}});return $("head").append('<script id="'+t.id+'" type="text/template">'+t.string+"</script>")}}};i={second:1e3,minute:6e4,hour:36e5};o=[{name:"Mass Relevance",time:{elapsed:0,end:8*i.hour}},{name:"Exercise (Cardio)",time:{elapsed:0,end:30*i.minute}},{name:"Exercise (Strength Training)",time:{elapsed:0,end:1*i.hour}},{name:"Sell Items",time:{elapsed:0,end:2*i.hour}}];n=function(){function e(e,t){this.$container=e;this.tasks=t;this.taskList=[]}e.prototype._insertTasks=function(){var e,n,r,i,s,o;s=this.tasks;o=[];for(r=0,i=s.length;r<i;r++){n=s[r];e=new t(n);e.init();this.taskList.push(e);o.push(this.$container.append(e.$container))}return o};e.prototype.init=function(){return this._insertTasks()};return e}();t=function(){function t(e){this.taskData=e;this._stop=a(this._stop,this);this.taskTmpl=$("#template_task").html();this.running=!1}t.prototype._getShortcuts=function(){this.$time=this.$container.find(".time");return this.$outerBar=this.$container.find(".bar.outer")};t.prototype._render=function(){return this.$container=$(_.template(this.taskTmpl,this.taskData))};t.prototype._initBar=function(){this.bar=new e(this.$outerBar);return this.bar.init()};t.prototype._initTimer=function(){this.timer=new r(this.$time,this.bar,this.taskData.time);return this.timer.init()};t.prototype._start=function(){this.$container.addClass("running");this.timer.start();return this.running=!0};t.prototype._stop=function(){this.$container.removeClass("running");this.timer.stop();return this.running=!1};t.prototype._handleStartStop=function(){var e=this;return this.$container.on("click",function(){return e.running?e._stop():e._start()})};t.prototype.init=function(){this._render();this._getShortcuts();this._initBar();this._initTimer();return this._handleStartStop()};return t}();r=function(){function e(e,t,n){this.$container=e;this.bar=t;this.time=n}e.prototype._getHumanTime=function(e,t){var n,r,i,s,o,a,f,l,c;t==null&&(t=!1);i=e%1e3;e=parseInt(e/1e3,0);o=e%60;e=parseInt(e/60,0);r=e%60;e=parseInt(e/60,0);n=e%24;s=[];c=[n,r,o];for(f=0,l=c.length;f<l;f++){a=c[f];s.push(u.lPad(a,2))}s=s.join(":");i!=null&&t&&(s+="."+u.lPad(i,3));return s};e.prototype._updateTime=function(){this.$elapsed.text(this._getHumanTime(this.time.elapsed));return this.$end.text(this._getHumanTime(this.time.end))};e.prototype._getShortcuts=function(){this.$elapsed=this.$container.find(".elapsed");return this.$end=this.$container.find(".end")};e.prototype.start=function(){return console.log("start")};e.prototype.stop=function(){return console.log("stop")};e.prototype.init=function(){this._getShortcuts();return this._updateTime()};return e}();e=function(){function e(e){this.$container=e}e.prototype.update=function(){};e.prototype.init=function(){};return e}();u.requireTemplate("task");s=new n($(".task-list"),o);s.init()}).call(this);